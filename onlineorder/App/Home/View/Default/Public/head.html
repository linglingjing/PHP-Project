<!-- HTML文档结构里<head></head>里引入的标签 -->
<meta charset="UTF-8">
<title>食全食美</title>
<link rel="stylesheet" href="__PUBLIC__/Home/css/font.css">
<link rel="stylesheet" href="__PUBLIC__/Home/css/common.css">
<link rel="stylesheet" href="__PUBLIC__/Home/css/basic.css">
<link rel="stylesheet" href="__PUBLIC__/Home/css/index.css">
<link rel="stylesheet" href="__PUBLIC__/Home/css/style.css">
<link rel="stylesheet" href="__PUBLIC__/Home/css/menu.css">
<link rel="stylesheet" href="__PUBLIC__/Home/css/detail.css">
<link rel="stylesheet" href="__PUBLIC__/Home/css/circumstance.css">
<link rel="stylesheet" href="__PUBLIC__/Home/css/cart.css">
<link rel="stylesheet" href="__PUBLIC__/Home/css/comment.css">
<link rel="stylesheet" href="__PUBLIC__/paging.css">
<script type="text/javascript" src="__PUBLIC__/Home/js/jquery-3.2.0.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/Home/js/jquery.fly.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/Home/js/common.js"></script>

<script type="text/javascript">
	$(function(){
		if ("<?php echo $_SESSION['username'];?>") {
			$('.login_and_register').replaceWith("<div class='login_and_register'><b><a href='{:U('Order/orderlist')}' style='color:#000;'><?php echo $_SESSION['username'];?></a></b><a id='cart' href='{:U('Cart/addcart')}' style='color:#555;cursor:pointer;'>购物车</a><a href='{:U('Index/logout_handle')}' style='color:#555;cursor:pointer;'>退出<a></div>");}

		$('#cart').click(function(){
			$('.layer').show();
			$('.layer').fadeIn(100);
			$('.cart_modal').slideDown(200);
			$('.cart_modal').show();
		});
		$('.close_model').click(function(){
			// $('.layer').show();
			$('.layer').fadeOut(100);
			$('.cart_modal').slideUp(200);
		});

		$('.jia').click(function(){
			var n=$(this).prev().val();
			var amount=parseInt(n)+1;
			if(amount==0){return;}
			$(this).prev().val(amount);
		});
		$('.jian').click(function(){
			var n=$(this).next().val();
			var amount=parseInt(n)-1;
			if(amount==0){ return;}
			$(this).next().val(amount);
		});

		 var offset = $("#cart").offset(); //offset()用于设置或返回当前匹配元素相对于当前文档的偏移，也就是相对于当前文档的坐标，该函数对可见元素有效
	    $(".add_cart").click(function(event){ 
	    	
	        var add_cart = $(this); 
	        var img = $('.addcart_img').attr('src'); 
	        var flyer = $('<img class="u-flyer" src="'+img+'">'); 
	        flyer.fly({ 
	            start: { 
	                left: event.pageX-859, //开始位置（必填）#fly元素会被设置成position: fixed 
	                top: event.pageY //开始位置（必填）
	            }, 
	            end: { 
	                left: offset.left+10, //结束位置（必填） 
	                top: offset.top+10, //结束位置（必填） 
	                width: 0, //结束时宽度 
	                height: 0 //结束时高度 
	            }, 
	            onEnd: function(){ //结束回调 
	                $("#msg").show().animate({width: '250px'}, 200).fadeOut(3000); //提示信息 
	            	} 
	        }); 
	    }); 

	})

	
</script>
<style type="text/css">
	#msg{
		text-align: center;
		display: none;
		position: absolute;
		top:22%;
		right:4%;
		height: 30px;
		line-height: 30px;
		border-radius: 5px;
		background: rgba(0,0,0,.5); 
		padding: 10px;
		color: #fff;
		font-size: 1.2em;
	}
</style>


